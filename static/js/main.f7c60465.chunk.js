(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n.p+"static/media/rock.5f3bcdf4.svg"},23:function(e,t,n){e.exports=n.p+"static/media/paper.18ca4182.svg"},24:function(e,t,n){e.exports=n.p+"static/media/scissors.515fe2fe.svg"},43:function(e,t,n){e.exports=n(75)},65:function(e,t,n){},67:function(e,t,n){},69:function(e,t,n){},71:function(e,t,n){},73:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(13),o=n.n(c),s=n(7),l=n(11),i=n(39),u=n(40),m=n(10),p=n(27),E=n.n(p),b=new E.a({Init:0,Win:1,Loss:2,Tie:3}),f=new E.a({Rock:0,Paper:1,Scissors:2}),h=0,d=function(e){return{type:"SET_BEST_SCORE",score:e}},g=function(e){return{type:"SET_CURRENT_SCORE",score:e}},S=function(e){return{type:"SET_PLAYER_SELECTION",selection:e}},O=function(e){return{type:"SET_OPPONENT_SELECTION",selection:e}},v=function(e){return{type:"SET_ROUND_RESULT",result:e}},N=function(e){return{type:"SET_IS_AUTHENTICATED",state:e}},y=function(e){return{type:"SET_TOKEN",token:e}},k=function(e){var t=h+1;return h=t,{type:"SET_ERROR_MESSAGE",message:e,id:t}},T={best:0,current:0},j={playerSelection:null,opponentSelection:null,result:b.Init},R={isAuthenticated:!1,accessToken:"",userName:""},L={message:""},_=Object(l.combineReducers)({score:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BEST_SCORE":return Object(m.a)({},e,{best:t.score});case"SET_CURRENT_SCORE":return Object(m.a)({},e,{current:t.score});default:return e}},round:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PLAYER_SELECTION":return Object(m.a)({},e,{playerSelection:t.selection});case"SET_OPPONENT_SELECTION":return Object(m.a)({},e,{opponentSelection:t.selection});case"SET_ROUND_RESULT":return Object(m.a)({},e,{result:t.result});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IS_AUTHENTICATED":return Object(m.a)({},e,{isAuthenticated:t.state});case"SET_TOKEN":return Object(m.a)({},e,{accessToken:t.token});case"SET_USERNAME":return Object(m.a)({},e,{userName:t.name});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ERROR_MESSAGE":return Object(m.a)({},e,{message:t.message,id:t.id});default:return e}}}),C=n(77),I=(n(60),n(79)),w=n(63),P={home:"/",play:"/play",login:"/login"},x=n(78),A=n(8),U=n(9),B=n(16),M=n(14),D=n(15),G=n(12),W=n(3),H=n(62),J=n(76),F=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(B.a)(this,Object(M.a)(t).call(this,e))).toggle=n.toggle.bind(Object(G.a)(Object(G.a)(n))),n.state={isOpen:!1},n}return Object(D.a)(t,e),Object(U.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){var e=this.props.isLoggedIn&&this.props.userName,t=r.a.createElement(W.k,{className:"mr-5"},r.a.createElement("span",{className:"navbar-text"},this.props.userName));return r.a.createElement(W.l,{color:"dark",dark:!0,expand:"sm",className:"mb-5"},r.a.createElement(W.i,null,r.a.createElement(H.a,{className:"navbar-brand",to:P.home},"RPS"),r.a.createElement(W.m,{onClick:this.toggle}),r.a.createElement(W.h,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(W.j,{className:"ml-auto",navbar:!0},e&&t,r.a.createElement(W.k,null,r.a.createElement(J.a,{exact:!0,className:"nav-link",activeClassName:"active",to:P.home},"Home")),r.a.createElement(W.k,null,r.a.createElement(J.a,{className:"nav-link",activeClassName:"active",to:P.play},"Play")),r.a.createElement(W.k,null,r.a.createElement(J.a,{className:"nav-link",activeClassName:"active",to:P.login},this.props.isLoggedIn?"Log Out":"Log In  "))))))}}]),t}(r.a.Component),Y=Object(x.a)(Object(s.b)(function(e){return{isLoggedIn:e.user.isAuthenticated,userName:e.user.userName}})(F)),z=function(){function e(){Object(A.a)(this,e)}return Object(U.a)(e,null,[{key:"calculateRoundResult",value:function(e,t){return e===t?b.Tie:e===f.Scissors&&t===f.Paper||e===f.Paper&&t===f.Rock||e===f.Rock&&t===f.Scissors?b.Win:b.Loss}},{key:"drawOpponentSelection",value:function(){var e,t;return f.get((e=0,t=3,e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e))}}]),e}(),K=function(){function e(){Object(A.a)(this,e)}return Object(U.a)(e,null,[{key:"calculateCurrentScore",value:function(e,t){switch(t){case b.Win:return e+1;case b.Loss:return 0;case b.Tie:return e;default:return null}}},{key:"isNewBestScore",value:function(e,t){return e>t}}]),e}(),V="https://rps-app-rest-api.herokuapp.com",q=function(e){return function(t,n){t(S(e)),t(O(z.drawOpponentSelection())),t(v(z.calculateRoundResult(n().round.playerSelection,n().round.opponentSelection))),t(g(K.calculateCurrentScore(n().score.current,n().round.result))),K.isNewBestScore(n().score.current,n().score.best)&&(t(d(n().score.current)),n().user.isAuthenticated&&function(e,t){var n={method:"PUT",body:JSON.stringify({bestScore:e}),headers:new Headers({Authorization:"Bearer "+t,"content-type":"application/json"})};return fetch(V+"/user/score/",n)}(n().score.best,n().user.accessToken).then(null,function(){return t(k("Connection to server failed"))}))}},Q=function(e,t){return function(n){var a=e.profileObj.givenName;(function(e){var t={method:"GET",headers:new Headers({access_token:e})};return fetch(V+"/user/auth/google/",t).then(function(e){return e.json()})})(e.accessToken).then(function(e){e.token&&(t.push(P.home),n(N(!0)),n(y(e.token)),n(d(e.bestScore)),a&&n({type:"SET_USERNAME",name:a}))}).catch(function(){return n(k("Connection to server failed"))})}},X=n(22),Z=n.n(X),$=n(23),ee=n.n($),te=n(24),ne=n.n(te),ae=(n(65),function(e){var t=[Z.a,ee.a,ne.a],n=f.enums.map(function(n,a){return r.a.createElement("div",{className:"OpponentRpsIcons-icon "+(e.selected===n?"bg-info":"bg-light"),key:n.key},r.a.createElement("img",{src:t[a],className:"OpponentRpsIcons-img",alt:n.key}))});return r.a.createElement(W.g,null,n)}),re=function(e){var t="",n="";switch(e.status){case b.Init:t="info",n="CHOOSE";break;case b.Win:t="success",n="WIN";break;case b.Loss:t="danger",n="LOSS";break;case b.Tie:t="warning",n="TIE"}return r.a.createElement(W.g,{xs:"6"},r.a.createElement(W.a,{color:t},r.a.createElement("h4",null,n)))},ce=(n(67),function(e){var t=[Z.a,ee.a,ne.a],n=f.enums.map(function(n,a){return r.a.createElement(W.c,{color:e.selected===n?"info":"light",onClick:function(){return e.onClick(n)},className:"PlayerRpsButtons-button",key:n.key},r.a.createElement("img",{src:t[a],className:"PlayerRpsButtons-img",alt:n.key}))});return r.a.createElement(W.g,null,n)}),oe=(n(69),function(e){return r.a.createElement(W.g,{sm:"6",className:"py-2"},r.a.createElement("span",{className:"ScoreBox"},e.text," ",r.a.createElement(W.b,{color:"secondary"},e.score)))}),se=function(e){function t(){return Object(A.a)(this,t),Object(B.a)(this,Object(M.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(U.a)(t,[{key:"componentWillUnmount",value:function(){this.props.handleUnmount()}},{key:"render",value:function(){return r.a.createElement(W.i,{className:"mb-4"},r.a.createElement(W.n,{className:"mb-4"},r.a.createElement(oe,{text:"Best Streak",score:this.props.bestScore}),r.a.createElement(oe,{text:"Current Streak",score:this.props.currentScore})),r.a.createElement(W.n,null,r.a.createElement(W.g,null,r.a.createElement("h5",{className:"text-danger"},"OPPONENT"))),r.a.createElement(W.n,{className:"mb-4"},r.a.createElement(ae,{selected:this.props.opponentSelection})),r.a.createElement(W.n,{className:"justify-content-center mb-4"},r.a.createElement(re,{status:this.props.result})),r.a.createElement(W.n,null,r.a.createElement(ce,{selected:this.props.playerSelection,onClick:this.props.handlePlayerRpsButtonClick})),r.a.createElement(W.n,null,r.a.createElement(W.g,null,r.a.createElement("h4",{className:"text-success mb-4"},"PLAYER"))))}}]),t}(r.a.Component),le=Object(s.b)(function(e){return{bestScore:e.score.best,currentScore:e.score.current,playerSelection:e.round.playerSelection,opponentSelection:e.round.opponentSelection,result:e.round.result}},function(e){return{handlePlayerRpsButtonClick:function(t){e(q(t))},handleUnmount:function(){e(function(e){e(S(null)),e(O(null)),e(v(b.Init)),e(g(0))})}}})(se),ie=function(e){return r.a.createElement(W.i,{className:"mb-4"},r.a.createElement(W.n,null,r.a.createElement(W.g,null,r.a.createElement("h1",null,"Rock-Paper-Scissors"))),r.a.createElement(W.n,{className:"mb-3"},r.a.createElement(W.g,null,r.a.createElement("h5",null,"by Jarmo"))),r.a.createElement(W.n,{className:"mb-2"},r.a.createElement(W.g,null,r.a.createElement(H.a,{className:"btn btn-info",to:P.play},"Play"))),r.a.createElement(W.n,{className:"mb-4"},r.a.createElement(W.g,null,r.a.createElement(H.a,{className:"btn btn-info",to:P.login},"Login"))),r.a.createElement(W.n,{className:"justify-content-md-center"},r.a.createElement(oe,{text:"Best Streak",score:e.bestScore})))},ue=Object(s.b)(function(e){return{bestScore:e.score.best}})(ie),me=n(31),pe=(n(71),function(e){var t=r.a.createElement(me.GoogleLogin,{className:"LoginView-GoogleLogin",clientId:"611403967225-c3bc8fccnuldn9c4906ji0jrr5d8v0ib.apps.googleusercontent.com",buttonText:"",onSuccess:function(t){return e.handleGoogleLoginSuccess(t,e.history)},onFailure:e.handleGoogleLoginFailure}),n=r.a.createElement(me.GoogleLogout,{className:"btn btn-info",buttonText:"Log Out",onLogoutSuccess:function(){return e.handleLogout(e.history)}});return r.a.createElement(W.i,{className:"mb-4"},r.a.createElement(W.n,null,r.a.createElement(W.g,{xs:"12",sm:{size:6,offset:3}},r.a.createElement(W.d,null,r.a.createElement(W.e,null,r.a.createElement(W.f,{className:"mb-4"},e.isLoggedIn?"Log Out":"Log In"),e.isLoggedIn?n:t)))))}),Ee=Object(s.b)(function(e){return{isLoggedIn:e.user.isAuthenticated}},function(e){return{handleGoogleLoginSuccess:function(t,n){e(Q(t,n))},handleGoogleLoginFailure:function(t){e(function(e){return function(t){t(k(e.error))}}(t))},handleLogout:function(t){e(function(e){return function(t){e.push(P.home),t(N(!1)),t(y("")),t(d(0))}}(t))}}})(pe),be=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(B.a)(this,Object(M.a)(t).call(this,e))).state={visible:!1},n.onDismiss=n.onDismiss.bind(Object(G.a)(Object(G.a)(n))),n}return Object(D.a)(t,e),Object(U.a)(t,[{key:"componentDidUpdate",value:function(e,t){t.visible||e.errorId===this.props.errorId||this.setState({visible:!0}),t.visible&&this.props.location!==e.location&&this.setState({visible:!1})}},{key:"onDismiss",value:function(){this.setState({visible:!1})}},{key:"render",value:function(){return r.a.createElement(W.a,{color:"danger",isOpen:this.state.visible,toggle:this.onDismiss},"Error: ",this.props.errorMessage)}}]),t}(r.a.Component),fe=Object(x.a)(Object(s.b)(function(e){return{errorMessage:e.error.message,errorId:e.error.id}})(be)),he=(n(73),function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Y,null),r.a.createElement(I.a,null,r.a.createElement(w.a,{exact:!0,path:P.home,component:ue}),r.a.createElement(w.a,{path:P.play,component:le}),r.a.createElement(w.a,{path:P.login,component:Ee})),r.a.createElement(fe,null))}),de=Object(l.createStore)(_,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(i.a)));o.a.render(r.a.createElement(s.a,{store:de},r.a.createElement(C.a,{basename:"/rps-app-client/"},r.a.createElement(he,null))),document.getElementById("root"))}},[[43,2,1]]]);
//# sourceMappingURL=main.f7c60465.chunk.js.map